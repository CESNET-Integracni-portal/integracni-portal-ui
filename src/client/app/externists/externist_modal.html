<mac-modal id="externist" mac-modal-keyboard>
    <div class="mac-modal-content">
        <h1>Registrace externisty</h1>
        <form name="form" class="ui small form" ng-submit="saveExternists(externist)" novalidate>
            <div class="field">
                <label>Uživatelské jméno externisty</label>
                <div ng-show="form.username.$touched">
                    <span ng-show="form.username.$error.required"><i class="warning icon"></i>Vyplňte uživatelské jméno.</span>
                    <span ng-show="form.username.$error.pattern"><i class="warning icon"></i>Uživatelské jméno obsahuje nepovolené znaky.</span>
                </div>
            </div>
            <br/>
            <div class="field">
                <label>Jméno a příjmení</label>
                <input name="name" type="text" ng-model="externist.name" ng-pattern='/^[a-zA-Zа-яА-Я0-9_!áčďéěíňóřšťůúýž +]+$/' required/>
                <div ng-show="form.name.$touched">
                    <span ng-show="form.name.$error.required"><i class="warning icon"></i>Vyplňte jméno a příjmení uživatel.</span>
                    <span ng-show="form.name.$error.pattern"><i class="warning icon"></i>Jméno a příjmení obsahuje nedovolené znaky.</span>
                </div>
            </div>
            <br/>
            <div class="field">
                <label>Na doporučení</label>
                <mac-autocomplete ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/" autocomplete="off" name="onuser" mac-autocomplete-delay="2" mac-autocomplete-source="users" mac-autocomplete-label="email" mac-placeholder='"email uživatele"' ng-model="externist.onuser" required></mac-autocomplete>
                <div ng-show="form.onuser.$touched">
                    <span ng-show="form.onuser.$error.required"><i class="warning icon"></i>Vyplňte doporučitele.</span>
                    <span ng-show="form.onuser.$error.pattern"><i class="warning icon"></i>Vyplňte validní email doporučitele.</span>
                </div>
            </div>
            <br/>

            <div class="field">
                <label>Email</label>
                <input name="email" type="email" ng-model="externist.email" required/>
                <div ng-show="form.email.$touched">
                    <span ng-show="form.email.$error.required"><i class="warning icon"></i>Vyplňte email.</span>
                    <span ng-show="form.email.$error.email"><i class="warning icon"></i>Vyplňte validní email.</span>
                </div>
            </div>
            <br/>
            <div class="field">
                <label>Prostor (GB)</label>
                <input name="quota" type="number" min="0.1" ng-model="externist.quota" required />
                <div ng-show="form.quota.$touched">
                    <span ng-show="form.quota.$error.required"><i class="warning icon"></i>Vyplňte velikost prostoru.</span>
                    <span ng-show="form.quota.$error.number"><i class="warning icon"></i>Velikost musí být číslo.</span>
                    <span ng-show="form.quota.$error.min"><i class="warning icon"></i>Velikost musí být nejméně 0.1GB.</span>
                </div>
            </div>
            <br/>
            <div class="field">
                <label>Organizační jednotka</label>
                <mac-autocomplete autocomplete="off" name="orgunit" mac-autocomplete-delay="2" mac-autocomplete-source="units" mac-autocomplete-label="name" mac-placeholder='"org. jednotka"' ng-model="externist.orgunit" required></mac-autocomplete>
                <div ng-show="form.orgunit.$touched">
                    <span ng-show="form.orgunit.$error.required"><i class="warning icon"></i>Vyplňte org. jednotku.</span>
                </div>
            </div>
            <br/>
            <input ng-disabled="form.$invalid" mac-modal-close type="submit" ng-click="form.$setUntouched()" value="Registrovat externistu" class="ui button"/>
        </form>
    </div>
</mac-modal>
